(function(h){function l(a){if(g[a])return g[a].exports;var b=g[a]={exports:{},id:a,loaded:!1};h[a].call(b.exports,b,b.exports,l);b.loaded=!0;return b.exports}var g={};l.m=h;l.c=g;l.p="";return l(0)})([function(h,l,g){h=g(1);g=g(2);h.renderComponent(g(null),document.getElementById("pixiContainer"))},function(h,l,g){h.exports=React},function(h,l,g){var a,b,e,d,c,f;f=g(3);e=g(1);c=g(7);a=g(4);d=g(5);b=g(6);l=e.createClass({getInitialState:function(){return{overlayData:void 0,segmentCountLimit:c.mapGeneration.SEGMENT_COUNT_LIMIT}},
render:function(){return e.DOM.div({id:"main-viewport-container"},a(null),e.DOM.div({id:"control-bar"},d({onText:"Hide Debug Drawing",offText:"Show Debug Drawing",action:function(){return c.mapGeneration.DEBUG=!c.mapGeneration.DEBUG}}),d({onText:"Hide Population Heatmap",offText:"Show Population Heatmap",action:function(){return c.mapGeneration.DRAW_HEATMAP=!c.mapGeneration.DRAW_HEATMAP}}),e.DOM.button({onClick:f.bind(this._factorTargetZoom,null,1.5)},"Zoom in"),e.DOM.button({onClick:f.bind(this._factorTargetZoom,
null,2/3)},"Zoom out"),e.DOM.label({htmlFor:"segment-limit"},"Segment limit:"),e.DOM.input({id:"segment-limit",onChange:this._onSegmentCountChange,type:"number",min:"1",max:"5000",value:this.state.segmentCountLimit}),e.DOM.button({onClick:this._regenerateMap},"Regenerate")))},_onSegmentCountChange:function(a){c.mapGeneration.SEGMENT_COUNT_LIMIT=a.target.value;return this.setState({segmentCountLimit:a.target.value})},_regenerateMap:function(){var a;a=(new Date).getTime();return b.generate(a)},_factorTargetZoom:function(a){return b.factorTargetZoom(a)}});
h.exports=l},function(h,l,g){h.exports=_},function(h,l,g){var a,b,e,d,c,f,k,r,w,m,v,p,t,n,y,A,x,u,s,z,F,D,B,P,C,E,G,q,R,S,U,H,J,V,O,L,N,Y,Z,W,Q,M,X,$,K,I,T;r=g(1);k=g(8);T=g(3);g(14);H=g(15);$=g(16);m=g(17);v=g(9);n=g(7);g(10);g(12);c=g(6);f=g(13);L=void 0;M=new k.Stage(4026920);S=new k.DisplayObjectContainer;A=new k.DisplayObjectContainer;F=new k.DisplayObjectContainer;s=new k.DisplayObjectContainer;I=new k.DisplayObjectContainer;C=new k.DisplayObjectContainer;E=new k.DisplayObjectContainer;M.addChild(S);
A.addChild(F);A.addChild(s);C.addChild(E);I.addChild(C);M.addChild(I);G=!0;V=void 0;Q=[];z=R=W=void 0;X=U=!1;B=D=0;y={x:0,y:0};Z=Y=null;K=.01*window.devicePixelRatio;x=!1;O=J=u=N=void 0;a=0;b=-500;d=e=0;M.touchstart=M.mousedown=function(a){X=!0;Y=a.global.x;return Z=a.global.y};M.touchend=M.touchendoutside=M.mouseup=M.mouseupoutside=function(a){X=!1;H.lengthV2(y)<=n.gameLogic.SELECT_PAN_THRESHOLD&&p(a.global.x,a.global.y);y.x=0;return y.y=0};q=new k.Graphics;q.lineStyle(4,k.rgb2hex([0,1,0]));q.moveTo(0,
50);q.lineTo(0,0);q.lineStyle(4,k.rgb2hex([1,0,1]));q.moveTo(0,0);q.lineTo(50,0);A.addChild(q);t=function(a){var c,d,b,t,f,n,e;n=a.x;e=a.y;b=W.retrieve({x:n,y:e,width:1,height:1});d=t=c=f=void 0;T.each(b,function(a,x){var k,u,y;if(null!=a.o.r&&(u=H.distanceToLine({x:n,y:e},a.o.r.start,a.o.r.end),k=u.distance2,y=u.lineProj2,u=u.length2,u=y<=u&&0<=y?k:Number.POSITIVE_INFINITY,null==c||u<f))return f=u,c=b[x],t=k,d=Math.sqrt(y)/a.o.length()});return{closestMatch:c,minDistance2:t,matchFraction:d}};p=function(c,
d){var f,e,x,y;y={x:(c-I.x)/K+a,y:(d-I.y)/K+b};e=t(y);f=e.closestMatch;x=e.minDistance2;e=e.matchFraction;q=new k.Graphics;C.addChild(q);q.beginFill(16777215,1);q.drawCircle(y.x,y.y,4);q.endFill();if(null!=f&&Math.sqrt(x)*K<n.gameLogic.SELECTION_RANGE&&(G?(V=new m.PathLocation(f.o,e),G=!1):(x=new m.PathLocation(f.o,e),G=!0,x=m.calc.find(V,x),null==J?(J=new k.Graphics,C.addChild(J)):0<J.children.length&&J.removeChildren(),T.each(x,function(a){return J.addChild(P(a,16777215,25))})),console.log(""+Q.indexOf(f.o).toString()+
" clicked"),n.mapGeneration.DEBUG))return u&&A.removeChild(u),u=new k.DisplayObjectContainer,f.o.debugLinks(),u.addChild(P(f.o)),T.each(f.o.links.f,function(a){return u.addChild(P(a))}),T.each(f.o.links.b,function(a){return u.addChild(P(a))}),A.addChild(u)};P=function(a,c,d){c=$.defaultFor(c,a.q.color);d=$.defaultFor(d,a.width);q=new k.Graphics;q.beginFill(0,0);q.lineStyle(d,c);q.drawCircle(a.r.start.x,a.r.start.y,2);q.moveTo(a.r.start.x,a.r.start.y);q.lineTo(a.r.end.x,a.r.end.y);q.drawCircle(a.r.end.x,
a.r.end.y,2);q.endFill();return q};w=function(){var c,u,s,r,p,g,h,q,l,m;if(U){(new Date).getTime();K=(K+f.getTargetZoom())/2;I.scale.x=K;I.scale.y=K;if(n.mapGeneration.DRAW_HEATMAP&&null!=R)for(null==N?(N=new k.Graphics,S.addChild(N)):N.clear(),p=L.width,u=L.height,c=s=0,l=n.mapGeneration.HEAT_MAP_PIXEL_DIM;0<l?s<p:s>p;c=s+=l)for(r=q=0,m=n.mapGeneration.HEAT_MAP_PIXEL_DIM;0<m?q<u:q>u;r=q+=m)g=(c+n.mapGeneration.HEAT_MAP_PIXEL_DIM/2-I.x)/K+a,h=(r+n.mapGeneration.HEAT_MAP_PIXEL_DIM/2-I.y)/K+b,g=R.populationAt(g,
h),N.beginFill(k.rgb2hex([0,g,0])),N.drawRect(c,r,n.mapGeneration.HEAT_MAP_PIXEL_DIM,n.mapGeneration.HEAT_MAP_PIXEL_DIM),N.endFill();else null!=N&&(S.removeChild(N),N=void 0);n.mapGeneration.DEBUG&&!x&&null!=A?(x=!0,C.addChild(A)):!n.mapGeneration.DEBUG&&x&&null!=A&&(x=!1,C.removeChild(A));n.mapGeneration.DEBUG&&z<Q.length?(u=Q[z++],F.addChild(P(u,7842423,25))):!n.mapGeneration.DEBUG&&0<z&&(z=0,0<F.children.length&&F.removeChildren());u=M.getMousePosition().x;p=M.getMousePosition().y;null==O&&(O=
new k.Graphics,O.beginFill(16711680,.3),O.lineStyle(4,16711680),O.drawCircle(0,0,n.gameLogic.DEFAULT_PICKUP_RANGE),O.endFill(),C.addChild(O));s=t({x:(u-I.x)/K+a,y:(p-I.y)/K+b});c=s.closestMatch;r=s.minDistance2;s=s.matchFraction;null!=c&&r<=n.gameLogic.DEFAULT_PICKUP_RANGE*n.gameLogic.DEFAULT_PICKUP_RANGE&&(c=H.fractionBetween(c.o.r.start,c.o.r.end,s),O.x=c.x,O.y=c.y);X&&(0<u&&0<p&&(D=u-Y,B=p-Z,Y=u,Z=p),y.x+=D,y.y+=B,e=-D/K,d=-B/K,a+=e,b+=d);X||(a+=e,b+=d,e*=.8,d*=.8);C.x=-a;C.y=-b;L.render(M)}return requestAnimationFrame(w)};
l=r.createClass({getInitialState:function(){return{}},componentDidMount:function(){var a,d,b,t;f.addChangeListener(this._onMapChange);a=(new Date).getTime();console.log("seed: "+a.toString());c.generate(a);a=this.refs.canvasContainer.getDOMNode();d=this.refs.canvas.getDOMNode();if(null!=d)return d.style.width=""+a.offsetWidth+"px",d.style.height=""+a.offsetHeight+"px",t=a.offsetWidth*window.devicePixelRatio,b=a.offsetHeight*window.devicePixelRatio,L=k.autoDetectRenderer(t,b,d,!1,!0),a.appendChild(L.view),
I.x=L.width/2,I.y=L.height/2,requestAnimationFrame(w),window.addEventListener("resize",this._handleResize)},componentWillUnmount:function(){f.removeChangeListener(this._onMapChange);return window.removeEventListener("resize",this._handleResize)},shouldComponentUpdate:function(a,c){return!1},render:function(){return r.DOM.div({id:"canvas-container",ref:"canvasContainer"},r.DOM.canvas({ref:"canvas"}))},_handleResize:function(){var a,c;a=this.refs.canvasContainer.getDOMNode();c=this.refs.canvas.getDOMNode();
c.style.width=""+a.offsetWidth+"px";c.style.height=""+a.offsetHeight+"px";c=a.offsetWidth*window.devicePixelRatio;a=a.offsetHeight*window.devicePixelRatio;if(null!=L)return L.resize(c,a),I.x=L.width/2,I.y=L.height/2},_onChange:function(){return this.setState(getStateFromStores())},_onMapChange:function(){var a,c,d,b,t,n,e,x;null!=J&&0<J.children.length&&J.removeChildren();0<E.children.length&&E.removeChildren();Q=f.getSegments();W=f.getQTree();R=f.getHeatmap();d=f.getDebugData();0<s.children.length&&
s.removeChildren();z=0;0<F.children.length&&F.removeChildren();T.each(d.snaps,function(a){q=new k.Graphics;q.beginFill(65280);q.moveTo(a.x,a.y);q.drawCircle(a.x,a.y,20);q.endFill();return s.addChild(q)});T.each(d.intersectionsRadius,function(a){q=new k.Graphics;q.beginFill(255);q.moveTo(a.x,a.y);q.drawCircle(a.x,a.y,20);q.endFill();return s.addChild(q)});T.each(d.intersections,function(a){q=new k.Graphics;q.beginFill(16711680);q.moveTo(a.x,a.y);q.drawCircle(a.x,a.y,20);q.endFill();return s.addChild(q)});
d=[];a=c=0;for(e=Q.length;c<e;a=c+=10){a=Q[a];t=v.buildingFactory.aroundSegment(function(){return v.buildingFactory.fromProbability((new Date).getTime())},a,10,400,W);n=0;for(x=t.length;n<x;n++)a=t[n],W.insert(a.collider.limits());d=d.concat(t)}e=0;for(t=d.length;e<t;e++)a=d[e],c=new k.Graphics,c.beginFill(792095),c.lineStyle(5,5592405),c.moveTo(a.corners[0].x,a.corners[0].y),c.lineTo(a.corners[1].x,a.corners[1].y),c.lineTo(a.corners[2].x,a.corners[2].y),c.lineTo(a.corners[3].x,a.corners[3].y),c.lineTo(a.corners[0].x,
a.corners[0].y),E.addChild(c);a=d=0;for(c=Q.length;d<c;a=d+=1)a=Q[a],b,b=a.q.color?a.q.color:10596265,E.addChild(P(a,b));return U=!0}});h.exports=l},function(h,l,g){var a;a=g(1);l=a.createClass({getInitialState:function(){return{textValue:this.props.offText,toggleState:!1}},render:function(){return a.DOM.button({onClick:this._onButtonClick},this.state.textValue)},_onButtonClick:function(){var a;a=!this.state.toggleState;this.setState({toggleState:a,textValue:a?this.props.onText:this.props.offText});
return this.props.action()}});h.exports=l},function(h,l,g){var a,b;a=g(11);b=g(12);h.exports={generate:function(e){return a.handleLogicAction({actionType:b.ActionTypes.MAP_GENERATE,seed:e})},factorTargetZoom:function(e){return a.handleLogicAction({actionType:b.ActionTypes.MAP_FACTOR_TARGET_ZOOM,factor:e})}}},function(h,l,g){var a,b;a=g(15);b=function(b){var d,c;d=Math.pow(Math.abs(b),3);for(c=0;0===c||Math.random()<Math.pow(Math.abs(c),3)/d;)c=a.randomRange(-b,+b);return c};h.exports={mapGeneration:{BUILDING_PLACEMENT_LOOP_LIMIT:3,
DEFAULT_SEGMENT_LENGTH:300,HIGHWAY_SEGMENT_LENGTH:400,DEFAULT_SEGMENT_WIDTH:6,HIGHWAY_SEGMENT_WIDTH:16,RANDOM_BRANCH_ANGLE:function(){return b(3)},RANDOM_STRAIGHT_ANGLE:function(){return b(15)},DEFAULT_BRANCH_PROBABILITY:.4,HIGHWAY_BRANCH_PROBABILITY:.05,HIGHWAY_BRANCH_POPULATION_THRESHOLD:.1,NORMAL_BRANCH_POPULATION_THRESHOLD:.1,NORMAL_BRANCH_TIME_DELAY_FROM_HIGHWAY:5,MINIMUM_INTERSECTION_DEVIATION:30,SEGMENT_COUNT_LIMIT:2E3,DEBUG_DELAY:0,ROAD_SNAP_DISTANCE:50,HEAT_MAP_PIXEL_DIM:50,DRAW_HEATMAP:!1,
QUADTREE_PARAMS:{x:-2E4,y:-2E4,width:4E4,height:4E4},QUADTREE_MAX_OBJECTS:10,QUADTREE_MAX_LEVELS:10,DEBUG:!1},gameLogic:{SELECT_PAN_THRESHOLD:50,SELECTION_RANGE:50,DEFAULT_PICKUP_RANGE:150,DEFAULT_BOOST_FACTOR:2,DEFAULT_BOOST_DURATION:2,MIN_LENGTH_FOR_VEHICLE_ARRIVAL:.1,DEFAULT_CARGO_CAPACITY:1,MIN_SPEED_PROPORTION:.1}}},function(h,l,g){h.exports=PIXI},function(h,l,g){var a,b,e,d,c,f,k,r,w,m,v;v=g(3);d=g(17);f=g(14);w=g(15);m=g(16);k=g(7);r=g(10);b=function(){return function(a,c,d,b){this.resourceType=
a;this.routePartialIdx=c;this.capacity=d;this.level=b}}();e=function(){function a(c,d,b,f){this.type=c;this["class"]=d;this.previousUpdateTime=b;this.boostRemaining=0;this.regeneration=this.baseRegeneration=f.regeneration;this.level=f.initialLevel;switch(this["class"]){case a.Class.SUPPLY:this.forBoost=m.defaultFor(f.boost,void 0),this.boostFactor=m.defaultFor(f.boostFactor,k.gameLogic.DEFAULT_BOOST_FACTOR),this.boostDuration=m.defaultFor(f.boostDuration,k.gameLogic.DEFAULT_BOOST_DURATION)}}a.Type=
{JAM:"jam",PEOPLE:"people",FOOD:"food"};a.Class={SUPPLY:"supply",DEMAND:"demand"};a.prototype.update=function(a){var c,d;c=a-this.previousUpdateTime;this.previousUpdateTime=a;c/=6E4;a=0;d=c;0<this.boostRemaining&&(a=Math.min(c,this.boostRemaining),this.boostRemaining-=a,d=c-a);this.level+=a*this.regeneration;0>=this.boostRemaining&&(this.regeneration=this.baseRegeneration);return this.level+=d*this.baseRegeneration};a.prototype.receivedCargo=function(a){var c;c=this._receivedType(a.resourceType,a.level);
a.level-=c;return c};a.prototype.receivedResource=function(a){return a.level-=this._receivedType(a.type,a.level)};a.prototype.fillCargo=function(c){var d;if(this["class"]===a.Class.SUPPLY&&c.resourceType===this.type)return d=c.capacity-c.level,d=Math.min(d,this.level),c.level+=d,this.level-=d};a.prototype._receivedType=function(c,d){var b;null!=this.forBoost&&resource.type===this.forBoost&&(this.boostRemaining=this.boostDuration,this.regeneration=this.baseRegeneration*this.boostFactor);b=0;this["class"]===
a.Class.DEMAND&&this.type===c&&(b=Math.min(this.level,d),this.level-=b);return b};return a}();a=function(){function a(c,d,b,e,x){this.center=c;this.dir=d;this.diagonal=b;this.type=e;x=m.defaultFor(x,1);this.aspectDegree=w.atanDegrees(x);this.corners=this.generateCorners();this.collider=new f.CollisionObject(this,f.CollisionObject.Type.RECT,{corners:this.corners});this.supply=[];this.demand=[];this.id=a.id;a.id+=1}a.Type={RESIDENTIAL:"residential",IMPORT:"import"};a.id=0;a.prototype.generateCorners=
function(){return[{x:this.center.x+this.diagonal*w.sinDegrees(+this.aspectDegree+this.dir),y:this.center.y+this.diagonal*w.cosDegrees(+this.aspectDegree+this.dir)},{x:this.center.x+this.diagonal*w.sinDegrees(-this.aspectDegree+this.dir),y:this.center.y+this.diagonal*w.cosDegrees(-this.aspectDegree+this.dir)},{x:this.center.x+this.diagonal*w.sinDegrees(180+this.aspectDegree+this.dir),y:this.center.y+this.diagonal*w.cosDegrees(180+this.aspectDegree+this.dir)},{x:this.center.x+this.diagonal*w.sinDegrees(180-
this.aspectDegree+this.dir),y:this.center.y+this.diagonal*w.cosDegrees(180-this.aspectDegree+this.dir)}]};a.prototype.setCenter=function(a){this.center=a;this.corners=this.generateCorners();return this.collider.updateCollisionProperties({corners:this.corners})};a.prototype.setDir=function(a){this.dir=a;this.corners=this.generateCorners();return this.collider.updateCollisionProperties({corners:this.corners})};return a}();c=function(a,c){var d,b,e,x,u;x=a.x;u=a.y;b=c.retrieve({x:x-k.gameLogic.DEFAULT_PICKUP_RANGE,
y:u-k.gameLogic.DEFAULT_PICKUP_RANGE,width:2*k.gameLogic.DEFAULT_PICKUP_RANGE,height:2*k.gameLogic.DEFAULT_PICKUP_RANGE});d=[];e=new f.CollisionObject(void 0,f.CollisionObject.Type.CIRCLE,{center:{x:x,y:u},radius:k.gameLogic.DEFAULT_PICKUP_RANGE});v.each(b,function(a){if(null!=a.o.supply&&null!=a.o.demand&&e.collide(a.o.collider))return d.push(a.o)});return d};l=function(){function a(c,d,b){this.id=c;this.vehicle_id=d;this._qTree=b;this.active=!1;this.drawPosition=void 0;this._route=[];this._buildings=
[];this._pickups=[];this._supply=[];this._demand=[];this._currentLocation={segment:void 0,fraction:void 0,atTime:void 0,pathIdx:void 0};this._path=[];this._pathEnd=this._pathStart=void 0;this._routePartialIdx=0}a.WhatShouldBeDropped=function(a,c,d){var b,f,e,k,r,g,h;e=[];a=a.slice(0);k=[];r=c.slice(0);g=0;for(h=a.length;g<h;g++)b=a[g],c=v.findIndex(r,function(a){return a.resourceType===b.resourceType}),f=v.any(d,function(a){return a.type===b.resourceType}),-1===c||f?e.push(b):(k.push(b),r.splice(c,
1));return{drops:e,finalCargo:k.concat(r)}};a.prototype.currentPosition=function(){return w.fractionBetween(this._currentLocation.segment.r.start,this._currentLocation.segment.r.end,this._currentLocation.fraction)};a.prototype.addLocation=function(a,d,b){var f,e,k,s;f=w.fractionBetween(a.o.r.start,a.o.r.end,a.fraction);a={location:f,astarLocation:a};d=null!=d?d:c(f,this._qTree);null!=b&&b<this.path.length?(this._route[b]=a,this._buildings[b]=d,this._pickups[b]=[],d=b):(this._route.push(a),this._buildings.push(d),
this._pickups.push([]),this._supply.push([]),this._demand.push([]),d=this._route.length-1);a=[];f=[];s=this._buildings[d];e=0;for(k=s.length;e<k;e++)b=s[e],a=a.concat(b.supply),f=f.concat(b.demand);this._supply[d]=a;return this._demand[d]=f};a.prototype.setActive=function(a,c){this.active=a;if(!0===a)return this._currentLocation.atTime=c/1E3};a.prototype.update=function(a){var c,d,b,f,e,s,z;a/=1E3;null==this._currentLocation.segment&&0<this._route.length&&(c=this._route[this._routePartialIdx].astarLocation,
this._currentLocation.segment=c.o,this._currentLocation.fraction=c.fraction,this._currentLocation.atTime=a,this._currentLocation.pathIdx=0,this._reachLocation(this._routePartialIdx));c=a-this._currentLocation.atTime;if(this.active&&0<this._route.length){for(z=[];0<c;){b=this._currentLocation.pathIdx;f=this._currentLocation.segment;if(b===this._path.length-1){f=f.endContaining(this._path[b-1]);a:{switch(f){case r.Segment.End.START:b=this._pathEnd.fraction-this._currentLocation.fraction;break a;case r.Segment.End.END:b=
1-this._pathEnd.fraction-(1-this._currentLocation.fraction);break a}b=void 0}a:{switch(f){case r.Segment.End.START:f=1;break a;case r.Segment.End.END:f=-1;break a}f=void 0}}else{f=f.endContaining(this._path[b+1]);a:{switch(f){case r.Segment.End.START:b=this._currentLocation.fraction;break a;case r.Segment.End.END:b=1-this._currentLocation.fraction;break a}b=void 0}a:{switch(f){case r.Segment.End.START:f=-1;break a;case r.Segment.End.END:f=1;break a}f=void 0}}e=this._currentLocation.segment.currentSpeed();
s=this._currentLocation.segment.length();d=b*s;d/=e;d=Math.min(d,c);e=d*e/s;this._currentLocation.fraction+=e*f;b=(b-e)*s;b<k.gameLogic.MIN_LENGTH_FOR_VEHICLE_ARRIVAL&&this._advancePath(this._currentLocation.pathIdx,a);this._currentLocation.atTime=a;z.push(c-=d)}return z}};a.prototype.setPickups=function(a,c){if(a<this._pickups.length)return this._pickups[a]=c};a.prototype.addPickup=function(a,c){return this._pickups[a].push(new b(c,a,k.gameLogic.DEFAULT_CARGO_CAPACITY,0))};a.prototype.removePickup=
function(a,c){return this._pickups[a].splice(c,1)};a.prototype.getExpectedDrops=function(c){var d,b;d=[];c<this._pickups.length&&(d=(c-1+this._route.length)%this._route.length,b=this._pickups[d],d=this._pickups[c],d=a.WhatShouldBeDropped(b,d,this._demand[c]).drops);return d};a.prototype.getPickups=function(a){return this._pickups[a]};a.prototype.getSupply=function(a,c){var d,b,f,e;b=this._supply[a];f=0;for(e=b.length;f<e;f++)d=b[f],d.update(c);return b};a.prototype.getDemand=function(a,c){var d,b,
f,e;d=this._demand[a];f=0;for(e=d.length;f<e;f++)b=d[f],b.update(c);return d};a.prototype.getGroupedSupply=function(a,c){return this._processResources(this._supply[a],c)};a.prototype.getGroupedDemand=function(a,c){return this._processResources(this._demand[a],c)};a.prototype.getAvailableCargo=function(a){var c,d,b,f,k,s;c=v.values(e.Type);b=[];f=[];k=0;for(s=c.length;k<s;k++)d=c[k],v.any(this._supply[a],function(a){return a.type===d})?b.push({type:d,supplied:!0}):f.push({type:d,supplied:!1});return b.concat(f)};
a.prototype.cost=function(){return v.reduce(this.path.slice(1,-1),function(a,c){return a+c.cost()},0)+this.pathStart.o.costTo(this.path[1],this.pathStart.fraction)+this.pathEnd.o.costTo(this.path[this.path.length-2],this.pathEnd.fraction)};a.prototype.length=function(){return this._route.length};a.prototype._advancePath=function(a,c){var d,b;if(a===this._path.length-1&&1<this._route.length)this._reachLocation(this._routePartialIdx),d=0;else{d=a+1;b=this._path[a];var f=this._currentLocation;a:{switch(this._path[d].endContaining(b)){case r.Segment.End.START:b=
0;break a;case r.Segment.End.END:b=1;break a}b=void 0}f.fraction=b}this._currentLocation.segment=this._path[d];this._currentLocation.atTime=c;return this._currentLocation.pathIdx=d};a.prototype._reachLocation=function(a){var c;this._routePartialIdx=(a+1)%this._route.length;c=this._route[this._routePartialIdx];this._setDestination(c.astarLocation.o,c.astarLocation.fraction);if(null!=this.onLocationReached)return this.onLocationReached(this.id,a,this.vehicle_id)};a.prototype._setDestination=function(a,
c){this._pathStart=new d.PathLocation(this._currentLocation.segment,this._currentLocation.fraction);this._pathEnd=new d.PathLocation(a,c);return this._path=d.calc.find(this._pathStart,this._pathEnd)};a.prototype._processResources=function(a,c){var d,b,f,e;d={};f=0;for(e=a.length;f<e;f++)b=a[f],b.update(c),d[b.type]||(d[b.type]=0),d[b.type]+=b.level;return d};return a}();h.exports={Cargo:b,Resource:e,Building:a,TransportRoute:l,buildingFactory:function(){return{fromProbability:function(c){return.4>
Math.random()?this.byType(a.Type.IMPORT,c):this.byType(a.Type.RESIDENTIAL,c)},byType:function(c,d){var b;b=void 0;switch(c){case a.Type.RESIDENTIAL:b=new a({x:0,y:0},0,80,a.Type.RESIDENTIAL,w.randomRange(.5,2));b.supply.push(new e(e.Type.PEOPLE,e.Class.SUPPLY,d,{regeneration:1,initialLevel:3,boost:e.Type.FOOD}));b.demand.push(new e(e.Type.FOOD,e.Class.DEMAND,d,{regeneration:.5,initialLevel:3}));break;case a.Type.IMPORT:b=new a({x:0,y:0},0,150,a.Type.IMPORT,w.randomRange(.5,2)),b.supply.push(new e(e.Type.FOOD,
e.Class.SUPPLY,d,{regeneration:1,initialLevel:3,boost:e.Type.PEOPLE})),b.demand.push(new e(e.Type.PEOPLE,e.Class.DEMAND,d,{regeneration:.5,initialLevel:3}))}return b},aroundSegment:function(a,c,d,b,f){var e,u,s,r,g,h,B,l,C,m,v,q;s=[];for(l=0;l<d;l+=1){e=360*Math.random();u=Math.random()*b;u={x:.5*(c.r.start.x+c.r.end.x)+u*w.sinDegrees(e),y:.5*(c.r.start.y+c.r.end.y)+u*w.cosDegrees(e)};e=a();e.setCenter(u);e.setDir(c.dir());h=!1;r=C=0;for(q=k.mapGeneration.BUILDING_PLACEMENT_LOOP_LIMIT;C<q;r=C+=1){u=
0;B=f.retrieve(e.collider.limits());B=B.concat(s);m=0;for(v=B.length;m<v;m++)if(g=B[m],null!=g.o&&(g=g.o),g=e.collider.collide(g.collider)){u+=1;if(r===k.mapGeneration.BUILDING_PLACEMENT_LOOP_LIMIT-1)break;e.setCenter(w.addPoints(e.center,g))}if(0===u){h=!0;break}}h&&s.push(e)}return s}}}(),buildingsInRangeOf:c}},function(h,l,g){var a,b,e,d,c,f,k,r,w,m,v,p,t,n,y={}.hasOwnProperty,A=function(a,c){function d(){this.constructor=a}for(var b in c)y.call(c,b)&&(a[b]=c[b]);d.prototype=c.prototype;a.prototype=
new d;a.__super__=c.prototype;return a};g(8);n=g(3);v=g(19).noise;a=g(20).Quadtree;g(21);m=g(15);t=g(16);d=g(14);c=g(7);b=function(a){function b(a,f,e,k){var x;x=this;a=n.cloneDeep(a);f=n.cloneDeep(f);e=t.defaultFor(e,0);k=t.defaultFor(k,{},!0);this.width=k.highway?c.mapGeneration.HIGHWAY_SEGMENT_WIDTH:c.mapGeneration.DEFAULT_SEGMENT_WIDTH;this.collider=new d.CollisionObject(this,d.CollisionObject.Type.LINE,{start:a,end:f,width:this.width});this.roadRevision=0;this.cachedLength=this.cachedDir=this.lengthRevision=
this.dirRevision=void 0;this.r={start:a,end:f,setStart:function(a){this.start=a;x.collider.updateCollisionProperties({start:this.start});return x.roadRevision++},setEnd:function(a){this.end=a;x.collider.updateCollisionProperties({end:this.end});return x.roadRevision++}};this.t=e;this.q=k;this.links={b:[],f:[]};this.users=[];a=k.highway?[1200,12]:[800,6];this.maxSpeed=a[0];this.capacity=a[1]}A(b,a);b.End={START:"start",END:"end"};b.prototype.currentSpeed=function(){return Math.min(c.gameLogic.MIN_SPEED_PROPORTION,
1-Math.max(0,this.users.length-1)/this.capacity)*this.maxSpeed};b.prototype.dir=function(){var a;this.dirRevision!==this.roadRevision&&(this.dirRevision=this.roadRevision,a=m.subtractPoints(this.r.end,this.r.start),this.cachedDir=-1*m.sign(m.crossProduct({x:0,y:1},a))*m.angleBetween({x:0,y:1},a));return this.cachedDir};b.prototype.length=function(){this.lengthRevision!==this.roadRevision&&(this.lengthRevision=this.roadRevision,this.cachedLength=m.length(this.r.start,this.r.end));return this.cachedLength};
b.prototype.debugLinks=function(){this.q.color=65280;n.each(this.links.b,function(a){return a.q.color=16711680});return n.each(this.links.f,function(a){return a.q.color=255})};b.prototype.startIsBackwards=function(){return 0<this.links.b.length?m.equalV(this.links.b[0].r.start,this.r.start)||m.equalV(this.links.b[0].r.end,this.r.start):m.equalV(this.links.f[0].r.start,this.r.end)||m.equalV(this.links.f[0].r.end,this.r.end)};b.prototype.cost=function(){return this.length()/this.currentSpeed()};b.prototype.costTo=
function(a,c){var d;d=this.endContaining(a);return this.cost()*function(){if(null!=c)switch(d){case b.End.START:return c;case b.End.END:return 1-c}else return.5}()};b.prototype.neighbours=function(){return this.links.f.concat(this.links.b)};b.prototype.endContaining=function(a){var c;c=this.startIsBackwards();if(-1!==this.links.b.indexOf(a))return c?b.End.START:b.End.END;if(-1!==this.links.f.indexOf(a))return c?b.End.END:b.End.START};b.prototype.linksForEndContaining=function(a){if(-1!==this.links.b.indexOf(a))return this.links.b;
if(-1!==this.links.f.indexOf(a))return this.links.f};b.prototype.split=function(a,c,b,d){var f,k;k=this.startIsBackwards();f=p.fromExisting(this);e(f,b,d);f.r.setEnd(a);this.r.setStart(a);f.links.b=this.links.b.slice(0);f.links.f=this.links.f.slice(0);k?(a=f,d=this,b=f.links.b):(a=this,d=f,b=f.links.f);n.each(b,function(a){var c;c=a.links.b.indexOf(this);if(-1!==c)return a.links.b[c]=f;c=a.links.f.indexOf(this);return a.links.f[c]=f},this);a.links.f=[];a.links.f.push(c);a.links.f.push(d);d.links.b=
[];d.links.b.push(c);d.links.b.push(a);c.links.f.push(a);return c.links.f.push(d)};return b}(d.CollisionObject);p=function(){return{fromExisting:function(a,c,d,f){c=t.defaultFor(c,a.t);d=t.defaultFor(d,a.r);f=t.defaultFor(f,a.q);return new b(d.start,d.end,c,f)},usingDirection:function(a,d,f,e,k){d=t.defaultFor(d,90);f=t.defaultFor(f,c.mapGeneration.DEFAULT_SEGMENT_LENGTH);d={x:a.x+f*m.sinDegrees(d),y:a.y+f*m.cosDegrees(d)};return new b(a,d,e,k)}}}();r=function(){return{popOnRoad:function(a){return(this.populationAt(a.start.x,
a.start.y)+this.populationAt(a.end.x,a.end.y))/2},populationAt:function(a,c){var d,b,f;d=(v.simplex2(a/1E4,c/1E4)+1)/2;b=(v.simplex2(a/2E4+500,c/2E4+500)+1)/2;f=(v.simplex2(a/2E4+1E3,c/2E4+1E3)+1)/2;return Math.pow((d*b+f)/2,2)}}}();f=function(a,c){return m.doLineSegmentsIntersect(a.start,a.end,c.start,c.end,!0)};w=function(a,d,b,e){var k,r,g,h,y,A,l,q,w;k={priority:0,func:void 0,q:{}};A=b.retrieve(a.collider.limits());g=q=0;for(w=A.length-1;q<=w;g=q+=1)g=A[g].o,4>=k.priority&&(r=f(a.r,g.r))&&(null==
k.q.t||r.t<k.q.t)&&(k.q.t=r.t,function(f,r){k.priority=4;return k.func=function(){if(t.minDegreeDifference(f.dir(),a.dir())<c.mapGeneration.MINIMUM_INTERSECTION_DEVIATION)return!1;f.split(r,a,d,b);a.r.end=r;a.q.severed=!0;null!=e&&(null==e.intersections&&(e.intersections=[]),e.intersections.push({x:r.x,y:r.y}));return!0}}(g,r)),3>=k.priority&&m.length(a.r.end,g.r.end)<=c.mapGeneration.ROAD_SNAP_DISTANCE&&function(c){var d;d=c.r.end;k.priority=3;return k.func=function(){var b;a.r.end=d;a.q.severed=
!0;b=c.startIsBackwards()?c.links.f:c.links.b;if(n.any(b,function(c){return m.equalV(c.r.start,a.r.end)&&m.equalV(c.r.end,a.r.start)||m.equalV(c.r.start,a.r.start)&&m.equalV(c.r.end,a.r.end)}))return!1;n.each(b,function(d){d.linksForEndContaining(c).push(a);return a.links.f.push(d)});b.push(a);a.links.f.push(c);null!=e&&(null==e.snaps&&(e.snaps=[]),e.snaps.push({x:d.x,y:d.y}));return!0}}(g),2>=k.priority&&(h=m.distanceToLine(a.r.end,g.r.start,g.r.end),r=h.distance2,l=h.pointOnLine,y=h.lineProj2,h=
h.length2,r<c.mapGeneration.ROAD_SNAP_DISTANCE*c.mapGeneration.ROAD_SNAP_DISTANCE&&0<=y&&y<=h&&function(f){var r;r=l;k.priority=2;return k.func=function(){a.r.end=r;a.q.severed=!0;if(t.minDegreeDifference(f.dir(),a.dir())<c.mapGeneration.MINIMUM_INTERSECTION_DEVIATION)return!1;f.split(r,a,d,b);null!=e&&(null==e.intersectionsRadius&&(e.intersectionsRadius=[]),e.intersectionsRadius.push({x:r.x,y:r.y}));return!0}}(g));return k.func?k.func():!0};k=function(){return{generate:function(a){var d,b,f,e,k,
g,t,h;e=[];a.q.severed||(b=function(c,d,b,f){return p.usingDirection(a.r.end,c,d,b,f)},h=n.partialRight(b,a.length(),0,a.q),t=n.partialRight(b,c.mapGeneration.DEFAULT_SEGMENT_LENGTH,a.q.highway?c.mapGeneration.NORMAL_BRANCH_TIME_DELAY_FROM_HIGHWAY:0),d=h(a.dir()),b=r.popOnRoad(d.r),a.q.highway?(g=h(a.dir()+c.mapGeneration.RANDOM_STRAIGHT_ANGLE()),k=r.popOnRoad(g.r),f,k>b?(e.push(g),f=k):(e.push(d),f=b),f>c.mapGeneration.HIGHWAY_BRANCH_POPULATION_THRESHOLD&&(Math.random()<c.mapGeneration.HIGHWAY_BRANCH_PROBABILITY?
(f=h(a.dir()-90+c.mapGeneration.RANDOM_BRANCH_ANGLE()),e.push(f)):Math.random()<c.mapGeneration.HIGHWAY_BRANCH_PROBABILITY&&(f=h(a.dir()+90+c.mapGeneration.RANDOM_BRANCH_ANGLE()),e.push(f)))):b>c.mapGeneration.NORMAL_BRANCH_POPULATION_THRESHOLD&&e.push(d),b>c.mapGeneration.NORMAL_BRANCH_POPULATION_THRESHOLD&&(Math.random()<c.mapGeneration.DEFAULT_BRANCH_PROBABILITY?(b=t(a.dir()-90+c.mapGeneration.RANDOM_BRANCH_ANGLE()),e.push(b)):Math.random()<c.mapGeneration.DEFAULT_BRANCH_PROBABILITY&&(b=t(a.dir()+
90+c.mapGeneration.RANDOM_BRANCH_ANGLE()),e.push(b))));t=function(c){return c.setupBranchLinks=function(){n.each(a.links.f,function(c){this.links.b.push(c);return c.linksForEndContaining(a).push(this)},this);a.links.f.push(this);return this.links.b.push(a)}};b=f=0;for(h=e.length-1;f<=h;b=f+=1)t(e[b]);return e}}}();e=function(a,c,d){c.push(a);return d.insert(a.collider.limits())};h.exports={Segment:b,generate:function(d){var f,g,t,h,y,A,l,m,E,G;g={};Math.seedrandom(d);v.seed(Math.random());A=[];(function(){var a,
d;d=new b({x:0,y:0},{x:c.mapGeneration.HIGHWAY_SEGMENT_LENGTH,y:0},0,{highway:!0});a=p.fromExisting(d);a.r.setEnd({x:d.r.start.x-c.mapGeneration.HIGHWAY_SEGMENT_LENGTH,y:a.r.end.y});a.links.b.push(d);d.links.b.push(a);A.push(d);return A.push(a)})();m=[];for(d=new a(c.mapGeneration.QUADTREE_PARAMS,c.mapGeneration.QUADTREE_MAX_OBJECTS,c.mapGeneration.QUADTREE_MAX_LEVELS);0<A.length&&m.length<c.mapGeneration.SEGMENT_COUNT_LIMIT;)if(h=void 0,y=0,n.each(A,function(a,c){if(null==h||a.t<h)return h=a.t,y=
c}),t=A.splice(y,1)[0],f=w(t,m,d,g))null!=t.setupBranchLinks&&t.setupBranchLinks(),e(t,m,d),n.each(k.generate(t),function(a){a.t=t.t+1+a.t;return A.push(a)});E=f=0;for(G=m.length;E<G;E++)l=m[E],l.id=f++;console.log(""+m.length+" segments generated.");return{segments:m,qTree:d,heatmap:r,debugData:g}}}},function(h,l,g){l=g(18);var a=g(25),b=g(12);g=a(new l,{handleViewAction:function(a){this.dispatch({source:b.PayloadSources.ViewAction,action:a})},handleLogicAction:function(a){this.dispatch({source:b.PayloadSources.LogicAction,
action:a})}});h.exports=g},function(h,l,g){l=g(26);h.exports={ActionTypes:l({VEHICLE_CREATE:null,VEHICLE_SET_CARGO:null,ROUTE_PARTIAL_CREATE:null,ROUTE_SET_ACTIVE:null,ROUTE_ADD_PICKUP:null,ROUTE_REMOVE_PICKUP:null,MAP_GENERATE:null,MAP_FACTOR_TARGET_ZOOM:null}),PayloadSources:l({SERVER_ACTION:null,VIEW_ACTION:null,LOGIC_ACTION:null}),OverlayModes:l({EDIT_VEHICLE:null,NEW_VEHICLE:null,NEW_ROUTE_PARTIAL_SELECTION:null})}},function(h,l,g){var a,b,e,d,c,f,k,r,w,m,v;c=g(27);d=g(10);l=g(11);a=g(23).EventEmitter;
e=g(12);w=[];m={};f=k=r=void 0;v=.05*window.devicePixelRatio;b=c(a.prototype,{get:function(a){return m[a]},getSegments:function(){return w},getQTree:function(){return r},getHeatmap:function(){return k},getDebugData:function(){return f},getTargetZoom:function(){return v},emitChange:function(){return this.emit("change")},addChangeListener:function(a){return this.on("change",a)},removeChangeListener:function(a){return this.removeListener("change",a)},dispatcherIndex:l.register(function(a){var c,g,h;
a=a.action;switch(a.actionType){case e.ActionTypes.MAP_GENERATE:c=d.generate(a.seed);a=c.segments;h=c.qTree;g=c.heatmap;c=c.debugData;w=a;r=h;k=g;f=c;m={};h=0;for(c=a.length;h<c;h++)g=a[h],m[g.id]=g;b.emitChange();break;case e.ActionTypes.MAP_FACTOR_TARGET_ZOOM:v*=a.factor}return!0})});h.exports=b},function(h,l,g){var a,b,e;e=g(3);a=g(15);b=g(16);h.exports={CollisionObject:function(){function d(a,d,b){this.o=a;this.collisionType=d;this.collisionProperties=b;this.collisionRevision=0;this.cachedLimits=
this.limitsRevision=void 0}d.Type={RECT:"rect",LINE:"line",CIRCLE:"circle"};d.prototype.updateCollisionProperties=function(a){this.collisionRevision++;return this.collisionProperties=e.assign(this.collisionProperties,a)};d.prototype.limits=function(){var a,b;this.collisionRevision!==this.limitsRevision&&(this.limitsRevision=this.collisionRevision,this.cachedLimits=function(){switch(this.collisionType){case d.Type.RECT:return a=e.min(this.collisionProperties.corners,"x").x,b=e.min(this.collisionProperties.corners,
"y").y,this.cachedLimits={x:a,y:b,width:e.max(this.collisionProperties.corners,"x").x-a,height:e.max(this.collisionProperties.corners,"y").y-b,o:this.o};case d.Type.LINE:return{x:Math.min(this.collisionProperties.start.x,this.collisionProperties.end.x),y:Math.min(this.collisionProperties.start.y,this.collisionProperties.end.y),width:Math.abs(this.collisionProperties.start.x-this.collisionProperties.end.x),height:Math.abs(this.collisionProperties.start.y-this.collisionProperties.end.y),o:this.o};case d.Type.CIRCLE:return{x:this.collisionProperties.center.x-
this.collisionProperties.radius,y:this.collisionProperties.center.y-this.collisionProperties.radius,width:2*this.collisionProperties.radius,height:2*this.collisionProperties.radius,o:this.o}}}.call(this));return this.cachedLimits};d.prototype.collide=function(a){var b,e;b=this.limits();e=a.limits();if(null!=b&&null!=e&&(b.x+b.width<e.x||e.x+e.width<b.x)&&(b.y+b.height<e.y||e.y+e.height<b.y))return!1;switch(this.collisionType){case d.Type.CIRCLE:switch(a.collisionType){case d.Type.RECT:return this.rectCircleCollision(a.collisionProperties,
this.collisionProperties)}break;case d.Type.RECT:switch(a.collisionType){case d.Type.RECT:return this.rectRectIntersection(this.collisionProperties,a.collisionProperties);case d.Type.LINE:return this.rectRectIntersection(this.collisionProperties,this.rectPropsFromLine(a.collisionProperties));case d.Type.CIRCLE:return this.rectCircleCollision(this.collisionProperties,a.collisionProperties)}break;case d.Type.LINE:switch(a.collisionType){case d.Type.RECT:return this.rectRectIntersection(this.rectPropsFromLine(this.collisionProperties),
a.collisionProperties);case d.Type.LINE:return this.rectRectIntersection(this.rectPropsFromLine(this.collisionProperties),this.rectPropsFromLine(a.collisionProperties))}}};d.prototype.rectCircleCollision=function(c,d){var b,e,g,h,l,p;e=c.corners;g=b=0;for(p=e.length;b<p;g=b+=1)if(a.length2(e[g],d.center)<=d.radius*d.radius)return!0;g=b=0;for(p=e.length;b<p;g=b+=1)if(l=e[g],g=e[(g+1)%e.length],h=a.distanceToLine(d.center,l,g),g=h.distance2,l=h.lineProj2,h=h.length2,0<l&&l<h&&g<=d.radius*d.radius)return!0;
b=[a.subtractPoints(e[3],e[0]),a.subtractPoints(e[3],e[2])];e=[a.project(a.subtractPoints(d.center,e[0]),b[0]),a.project(a.subtractPoints(d.center,e[2]),b[1])];return 0>e[0].dotProduct||a.lengthV2(e[0].projected)>a.lengthV2(b[0])||0>e[1].dotProduct||a.lengthV2(e[1].projected)>a.lengthV2(b[1])?!1:!0};d.prototype.rectPropsFromLine=function(d){var b;b=a.subtractPoints(d.end,d.start);b={x:-b.y,y:b.x};b=a.multVScalar(b,.5*d.width/a.lengthV(b));return{corners:[a.addPoints(d.start,b),a.subtractPoints(d.start,
b),a.subtractPoints(d.end,b),a.addPoints(d.end,b)]}};d.prototype.rectRectIntersection=function(d,f){var k,g,h,l,v,p,t,n,y,A,x,u,s,z,F,D;l=d.corners;v=f.corners;k=[a.subtractPoints(l[3],l[0]),a.subtractPoints(l[3],l[2]),a.subtractPoints(v[0],v[1]),a.subtractPoints(v[0],v[3])];h=[];F=0;for(D=k.length;F<D;F++){g=k[F];t=[];z=[];n=0;for(x=l.length;n<x;n++)p=l[n],t.push(a.project(p,g).projected);n=0;for(x=v.length;n<x;n++)p=v[n],z.push(a.project(p,g).projected);x=[];p=[];u=0;for(y=t.length;u<y;u++)n=t[u],
x.push(a.dotProduct(n,g));y=0;for(u=z.length;y<u;y++)n=z[y],p.push(a.dotProduct(n,g));n=b.extendedMax(x);g=n[0];n=n[1];u=b.extendedMin(x);x=u[0];u=u[1];A=b.extendedMax(p);y=A[0];A=A[1];s=b.extendedMin(p);p=s[0];s=s[1];if(g<p||y<x)return!1;p=a.subtractPoints(t[n],z[s]);t=a.subtractPoints(z[A],t[u]);a.lengthV2(p)<a.lengthV2(t)?h.push(p):h.push(a.multVScalar(t,-1))}k=e.min(h,function(d){return a.lengthV2(d)});return a.multVScalar(k,-1)};return d}()}},function(h,l,g){h.exports={doLineSegmentsIntersect:function(a,
b,e,d,c){b=this.subtractPoints(b,a);d=this.subtractPoints(d,e);var f=this.crossProduct(this.subtractPoints(e,a),b),k=this.crossProduct(b,d);if(0==f&&0==k||0==k)return!1;f/=k;e=this.crossProduct(this.subtractPoints(e,a),d)/k;return(c=c?.001<e&&.999>e&&.001<f&&.999>f:0<=e&&1>=e&&0<=f&&1>=f)?{x:a.x+e*b.x,y:a.y+e*b.y,t:e}:c},crossProduct:function(a,b){return a.x*b.y-a.y*b.x},subtractPoints:function(a,b){var e={};e.x=a.x-b.x;e.y=a.y-b.y;return e},equalV:function(a,b){var e=this.subtractPoints(a,b);return 1E-8>
this.lengthV2(e)},addPoints:function(a,b){var e={};e.x=a.x+b.x;e.y=a.y+b.y;return e},dotProduct:function(a,b){return a.x*b.x+a.y*b.y},length:function(a,b){var e=this.subtractPoints(b,a);return this.lengthV(e)},length2:function(a,b){var e=this.subtractPoints(b,a);return this.lengthV2(e)},lengthV:function(a){return Math.sqrt(this.lengthV2(a))},lengthV2:function(a){return a.x*a.x+a.y*a.y},angleBetween:function(a,b){angleRad=Math.acos((a.x*b.x+a.y*b.y)/(this.lengthV(a)*this.lengthV(b)));return angleDeg=
180*angleRad/Math.PI},sign:function(a){return 0<a?1:0>a?-1:0},fractionBetween:function(a,b,e){b=this.subtractPoints(b,a);return{x:a.x+b.x*e,y:a.y+b.y*e}},sinDegrees:function(a){return Math.sin(a*Math.PI/180)},cosDegrees:function(a){return Math.cos(a*Math.PI/180)},atanDegrees:function(a){return 180*Math.atan(a)/Math.PI},randomRange:function(a,b){return Math.random()*(b-a)+a},multVScalar:function(a,b){return{x:a.x*b,y:a.y*b}},divVScalar:function(a,b){return{x:a.x/b,y:a.y/b}},oldDistanceToLine:function(a,
b,e){var d=this.subtractPoints(e,b);e=this.lengthV(d);var c=this.divVScalar(d,e),d=this.dotProduct(this.subtractPoints(b,a),c),c=this.multVScalar(c,d);b=this.subtractPoints(this.subtractPoints(b,a),c);return{distance:this.lengthV(b),pointOnLine:this.addPoints(a,b),lineProj:-d,length:e}},newDistanceToLine:function(a,b,e){var d=this.subtractPoints(a,b);e=this.subtractPoints(e,b);var d=this.project(d,e),c=d.projected;b=this.addPoints(b,c);return{distance:this.length(b,a),pointOnLine:b,lineProj:this.sign(d.dotProduct)*
this.lengthV(c),length:this.lengthV(e)}},distanceToLine:function(a,b,e){var d=this.subtractPoints(a,b);e=this.subtractPoints(e,b);var d=this.project(d,e),c=d.projected;b=this.addPoints(b,c);return{distance2:this.length2(b,a),pointOnLine:b,lineProj2:this.sign(d.dotProduct)*this.lengthV2(c),length2:this.lengthV2(e)}},project:function(a,b){var e=this.dotProduct(a,b);return{dotProduct:e,projected:this.multVScalar(b,e/this.lengthV2(b))}}}},function(h,l,g){var a;a=g(3);h.exports={defaultFor:function(b,
e,d){var c;c=d?a.cloneDeep(b):b;e=d?a.cloneDeep(e):e;return"undefined"!==typeof b?c:e},joinArrayGeneric:function(a,e){var d,c,f,k;d=a.slice(0);c=f=1;for(k=2*d.length-1;f<k;c=f+=2)d.splice(c,0,e);return d},addArrayPushListener:function(a,e){return a.push=function(){var a,b,f;a=b=0;for(f=arguments.length-1;b<=f;a=b+=1)this[this.length]=arguments[a],e();return this.length}},minDegreeDifference:function(a,e){var d;d=Math.abs(a-e)%180;return Math.min(d,Math.abs(d-180))},extendedMin:function(b,e){var d,
c;null==e&&(e=function(a){return a});d=void 0;c=0;a.each(b,function(a,b){if(null==d||e(a)<e(d))return d=a,c=b});return[d,c]},extendedMax:function(b,e){var d,c;null==e&&(e=function(a){return a});d=void 0;c=0;a.each(b,function(a,b){if(null==d||e(a)>e(d))return d=a,c=b});return[d,c]},PriorityQueue:function(){function b(){this.list=[]}b.prototype.put=function(b,d){var c,f;f={item:b,priority:d};c=a.findIndex(this.list,function(a){return a.priority>f.priority});return-1===c?this.list.push(f):this.list.splice(c,
0,f)};b.prototype.get=function(){return this.list.shift().item};b.prototype.length=function(){return this.list.length};return b}()}},function(h,l,g){var a,b;b=g(16);a=g(22);h.exports={PathLocation:function(){return function(a,b){this.o=a;this.fraction=b}}(),calc:function(){var e;e=function(a,b,e,k){var g,h;h=g=void 0;if(e.o===k.o)return b=Math.abs(e.fraction-k.fraction),b*a.cost();a===e.o&&(g=e.fraction);b===k.o&&(h=k.fraction);return a.costTo(b,g)+b.costTo(a,h)};return{find:function(d,c){var f,k,
g,h,l,v,p,t,n;h=new b.PriorityQueue;h.put(d.o,0);f=new a;f.put(d.o,null);k=new a;for(k.put(d.o,0);0<h.length();){g=h.get();if(g===c.o)break;n=g.neighbours();p=0;for(t=n.length;p<t;p++)if(v=n[p],l=k.get(g)+e(g,v,d,c),null==k.get(v)||l<k.get(v))k.put(v,l),h.put(v,l),f.put(v,g)}console.log("path cost: "+k.get(c.o));g=c.o;for(k=[g];g!==d.o;)g=f.get(g),k.unshift(g);return k}}}()}},function(h,l,g){function a(){this.$Dispatcher_callbacks={};this.$Dispatcher_isPending={};this.$Dispatcher_isHandled={};this.$Dispatcher_isDispatching=
!1;this.$Dispatcher_pendingPayload=null}var b=g(24),e=1;a.prototype.register=function(a){var b="ID_"+e++;this.$Dispatcher_callbacks[b]=a;return b};a.prototype.unregister=function(a){b(this.$Dispatcher_callbacks[a],"Dispatcher.unregister(...): `%s` does not map to a registered callback.",a);delete this.$Dispatcher_callbacks[a]};a.prototype.waitFor=function(a){b(this.$Dispatcher_isDispatching,"Dispatcher.waitFor(...): Must be invoked while dispatching.");for(var c=0;c<a.length;c++){var e=a[c];this.$Dispatcher_isPending[e]?
b(this.$Dispatcher_isHandled[e],"Dispatcher.waitFor(...): Circular dependency detected while waiting for `%s`.",e):(b(this.$Dispatcher_callbacks[e],"Dispatcher.waitFor(...): `%s` does not map to a registered callback.",e),this.$Dispatcher_invokeCallback(e))}};a.prototype.dispatch=function(a){b(!this.$Dispatcher_isDispatching,"Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch.");this.$Dispatcher_startDispatching(a);try{for(var c in this.$Dispatcher_callbacks)this.$Dispatcher_isPending[c]||
this.$Dispatcher_invokeCallback(c)}finally{this.$Dispatcher_stopDispatching()}};a.prototype.isDispatching=function(){return this.$Dispatcher_isDispatching};a.prototype.$Dispatcher_invokeCallback=function(a){this.$Dispatcher_isPending[a]=!0;this.$Dispatcher_callbacks[a](this.$Dispatcher_pendingPayload);this.$Dispatcher_isHandled[a]=!0};a.prototype.$Dispatcher_startDispatching=function(a){for(var b in this.$Dispatcher_callbacks)this.$Dispatcher_isPending[b]=!1,this.$Dispatcher_isHandled[b]=!1;this.$Dispatcher_pendingPayload=
a;this.$Dispatcher_isDispatching=!0};a.prototype.$Dispatcher_stopDispatching=function(){this.$Dispatcher_pendingPayload=null;this.$Dispatcher_isDispatching=!1};h.exports=a},function(h,l,g){(function(a){function b(a,b,d){this.x=a;this.y=b;this.z=d}function e(a){return a*a*a*(a*(6*a-15)+10)}function d(a,b,d){return(1-d)*a+d*b}a=a.noise={};b.prototype.dot2=function(a,b){return this.x*a+this.y*b};b.prototype.dot3=function(a,b,d){return this.x*a+this.y*b+this.z*d};var c=[new b(1,1,0),new b(-1,1,0),new b(1,
-1,0),new b(-1,-1,0),new b(1,0,1),new b(-1,0,1),new b(1,0,-1),new b(-1,0,-1),new b(0,1,1),new b(0,-1,1),new b(0,1,-1),new b(0,-1,-1)],f=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,
132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,
29,24,72,243,141,128,195,78,66,215,61,156,180],k=Array(512),g=Array(512);a.seed=function(a){0<a&&1>a&&(a*=65536);a=Math.floor(a);256>a&&(a|=a<<8);for(var b=0;256>b;b++){var d;d=b&1?f[b]^a&255:f[b]^a>>8&255;k[b]=k[b+256]=d;g[b]=g[b+256]=c[d%12]}};a.seed(0);var h=.5*(Math.sqrt(3)-1),l=(3-Math.sqrt(3))/6,v=1/3,p=1/6;a.simplex2=function(a,b){var d,c,e;e=(a+b)*h;var f=Math.floor(a+e),s=Math.floor(b+e);e=(f+s)*l;d=a-f+e;var z=b-s+e,p,D;d>z?(p=1,D=0):(p=0,D=1);c=d-p+l;var B=z-D+l;e=d-1+2*l;var v=z-1+2*l,
f=f&255,s=s&255,C=g[f+k[s]];p=g[f+p+k[s+D]];f=g[f+1+k[s+1]];s=.5-d*d-z*z;0>s?d=0:(s*=s,d=s*s*C.dot2(d,z));z=.5-c*c-B*B;0>z?c=0:(z*=z,c=z*z*p.dot2(c,B));B=.5-e*e-v*v;0>B?e=0:(B*=B,e=B*B*f.dot2(e,v));return 70*(d+c+e)};a.simplex3=function(a,b,d){var c,e,f=(a+b+d)*v,h=Math.floor(a+f);c=Math.floor(b+f);var l=Math.floor(d+f),f=(h+c+l)*p;e=a-h+f;var m=b-c+f,D=d-l+f,B,w,C,E,G,q;e>=m?m>=D?(B=1,C=w=0,G=E=1,q=0):(e>=D?(B=1,C=w=0):(w=B=0,C=1),E=1,G=0,q=1):m<D?(w=B=0,C=1,E=0,q=G=1):e<D?(B=0,w=1,E=C=0,q=G=1):
(B=0,w=1,C=0,G=E=1,q=0);var R=e-B+p,S=m-w+p,U=D-C+p;a=e-E+2*p;var H=m-G+2*p,J=D-q+2*p;d=e-1+3*p;b=m-1+3*p;f=D-1+3*p;h&=255;c&=255;var l=l&255,V=g[h+k[c+k[l]]];B=g[h+B+k[c+w+k[l+C]]];E=g[h+E+k[c+G+k[l+q]]];h=g[h+1+k[c+1+k[l+1]]];c=.6-e*e-m*m-D*D;0>c?c=0:(c*=c,c=c*c*V.dot3(e,m,D));e=.6-R*R-S*S-U*U;0>e?e=0:(e*=e,e=e*e*B.dot3(R,S,U));l=.6-a*a-H*H-J*J;0>l?a=0:(l*=l,a=l*l*E.dot3(a,H,J));H=.6-d*d-b*b-f*f;0>H?d=0:(H*=H,d=H*H*h.dot3(d,b,f));return 32*(c+e+a+d)};a.perlin2=function(a,b){var c=Math.floor(a),
f=Math.floor(b);a-=c;b-=f;var c=c&255,f=f&255,h=g[c+k[f]].dot2(a,b),l=g[c+k[f+1]].dot2(a,b-1),m=g[c+1+k[f]].dot2(a-1,b),c=g[c+1+k[f+1]].dot2(a-1,b-1),f=e(a);return d(d(h,m,f),d(l,c,f),e(b))};a.perlin3=function(a,b,c){var f=Math.floor(a),h=Math.floor(b),l=Math.floor(c);a-=f;b-=h;c-=l;var f=f&255,h=h&255,l=l&255,m=g[f+k[h+k[l]]].dot3(a,b,c),p=g[f+k[h+k[l+1]]].dot3(a,b,c-1),w=g[f+k[h+1+k[l]]].dot3(a,b-1,c),v=g[f+k[h+1+k[l+1]]].dot3(a,b-1,c-1),B=g[f+1+k[h+k[l]]].dot3(a-1,b,c),P=g[f+1+k[h+k[l+1]]].dot3(a-
1,b,c-1),C=g[f+1+k[h+1+k[l]]].dot3(a-1,b-1,c),f=g[f+1+k[h+1+k[l+1]]].dot3(a-1,b-1,c-1);a=e(a);b=e(b);c=e(c);return d(d(d(m,B,a),d(p,P,a),c),d(d(w,C,a),d(v,f,a),c),b)}})(h.exports)},function(h,l,g){(function(a,b){function e(a,b,e,g){this.max_objects=b||10;this.max_levels=e||4;this.level=g||0;this.bounds=a;this.objects=[];this.nodes=[]}e.prototype.split=function(){var a=this.level+1,c=b.round(this.bounds.width/2),f=b.round(this.bounds.height/2),g=b.round(this.bounds.x),h=b.round(this.bounds.y);this.nodes[0]=
new e({x:g+c,y:h,width:c,height:f},this.max_objects,this.max_levels,a);this.nodes[1]=new e({x:g,y:h,width:c,height:f},this.max_objects,this.max_levels,a);this.nodes[2]=new e({x:g,y:h+f,width:c,height:f},this.max_objects,this.max_levels,a);this.nodes[3]=new e({x:g+c,y:h+f,width:c,height:f},this.max_objects,this.max_levels,a)};e.prototype.getIndex=function(a){var b=-1,e=this.bounds.x+this.bounds.width/2,g=this.bounds.y+this.bounds.height/2,h=a.y<g&&a.y+a.height<g,g=a.y>g;a.x<e&&a.x+a.width<e?h?b=1:
g&&(b=2):a.x>e&&(h?b=0:g&&(b=3));return b};e.prototype.insert=function(a){var b=0,e;if("undefined"!==typeof this.nodes[0]&&(e=this.getIndex(a),-1!==e)){this.nodes[e].insert(a);return}this.objects.push(a);if(this.objects.length>this.max_objects&&this.level<this.max_levels)for("undefined"===typeof this.nodes[0]&&this.split();b<this.objects.length;)e=this.getIndex(this.objects[b]),-1!==e?this.nodes[e].insert(this.objects.splice(b,1)[0]):b+=1};e.prototype.retrieve=function(a){var b=this.getIndex(a),e=
this.objects;if("undefined"!==typeof this.nodes[0])if(-1!==b)e=e.concat(this.nodes[b].retrieve(a));else for(b=0;b<this.nodes.length;b+=1)e=e.concat(this.nodes[b].retrieve(a));return e};e.prototype.clear=function(){this.objects=[];for(var a=0;a<this.nodes.length;a+=1)"undefined"!==typeof this.nodes[a]&&(this.nodes[a].clear(),delete this.nodes[a])};a.Quadtree=e})(h.exports,Math)},function(h,l,g){var a;(function(b){(function(b,d,c,f,k,h,w,m,v){function p(a){var b,c=a.length,d=this,e=0,g=d.i=d.j=0,h=
d.S=[];for(c||(a=[c++]);e<f;)h[e]=e++;for(e=0;e<f;e++)h[e]=h[g=z&g+a[e%c]+(b=h[e])],h[g]=b;(d.g=function(a){for(var b,c=0,e=d.i,g=d.j,h=d.S;a--;)b=h[e=z&e+1],c=c*f+h[z&(h[e]=h[g=z&g+b])+(h[g]=b)];d.i=e;d.j=g;return c})(f)}function t(a,b){var c=[],d=typeof a,e;if(b&&"object"==d)for(e in a)try{c.push(t(a[e],b-1))}catch(f){}return c.length?c:"string"==d?a:a+"\x00"}function n(a,b){for(var c=a+"",d,e=0;e<c.length;)b[z&e]=z&(d^=19*b[z&e])+c.charCodeAt(e++);return A(b)}function y(a){try{return b.crypto.getRandomValues(a=
new Uint8Array(f)),A(a)}catch(c){return[+new Date,b,(a=b.navigator)&&a.plugins,b.screen,A(d)]}}function A(a){return String.fromCharCode.apply(0,a)}var x=c.pow(f,k),u=c.pow(2,h),s=2*u,z=f-1,F=c["seed"+v]=function(a,b,e){var g=[];b=1==b?{entropy:!0}:b||{};a=n(t(b.entropy?[a,A(d)]:null==a?y():a,3),g);var h=new p(g);n(A(h.S),d);return(b.pass||e||function(a,b,d){return d?(c[v]=a,b):a})(function(){for(var a=h.g(k),b=x,c=0;a<u;)a=(a+c)*f,b*=f,c=h.g(1);for(;a>=s;)a/=2,b/=2,c>>>=1;return(a+c)/b},a,"global"in
b?b.global:this==c)};n(c[v](),d);w&&w.exports?w.exports=F:g(30)&&g(31)&&!(a=function(){return F}.call(l,g,l,w),void 0!==a&&(w.exports=a))})(this,[],Math,256,6,52,"object"==typeof b&&b,g(30),"random")}).call(l,g(32)(h))},function(h,l,g){function a(a){this.current=void 0;this.size=0;!1===a&&this.disableLinking()}a.noop=function(){return this};a.illegal=function(){throw Error("illegal operation for maps without linking");};a.from=function(b,e){var d=new a,c;for(c in b)(e||b.hasOwnProperty(c))&&d.put(c,
b[c]);return d};a.prototype.disableLinking=function(){this.disableLinking=this.unlink=this.link=a.noop;this.removeAll=this.value=this.key=this.next=a.illegal;return this};a.prototype.hash=function(a){return typeof a+" "+(a instanceof Object?a.__hash||(a.__hash=++arguments.callee.current):a.toString())};a.prototype.hash.current=0;a.prototype.get=function(a){a=this[this.hash(a)];return void 0===a?void 0:a.value};a.prototype.put=function(a,e){var d=this.hash(a);if(void 0===this[d]){var c={key:a,value:e};
this[d]=c;this.link(c);++this.size}else this[d].value=e;return this};a.prototype.remove=function(a){a=this.hash(a);var e=this[a];void 0!==e&&(--this.size,this.unlink(e),delete this[a]);return this};a.prototype.removeAll=function(){for(;this.size;)this.remove(this.key());return this};a.prototype.link=function(a){0==this.size?(a.prev=a,this.current=a.next=a):(a.prev=this.current.prev,a.prev.next=a,a.next=this.current,this.current.prev=a)};a.prototype.unlink=function(a){0==this.size?this.current=void 0:
(a.prev.next=a.next,a.next.prev=a.prev,a===this.current&&(this.current=a.next))};a.prototype.next=function(){this.current=this.current.next};a.prototype.key=function(){return this.current.key};a.prototype.value=function(){return this.current.value};h.exports=a},function(h,l,g){function a(){this._events=this._events||{};this._maxListeners=this._maxListeners||void 0}function b(a){return"function"===typeof a}function e(a){return"object"===typeof a&&null!==a}h.exports=a;a.EventEmitter=a;a.prototype._events=
void 0;a.prototype._maxListeners=void 0;a.defaultMaxListeners=10;a.prototype.setMaxListeners=function(a){if("number"!==typeof a||0>a||isNaN(a))throw TypeError("n must be a positive number");this._maxListeners=a;return this};a.prototype.emit=function(a){var c,f,g,h;this._events||(this._events={});if("error"===a&&(!this._events.error||e(this._events.error)&&!this._events.error.length)){c=arguments[1];if(c instanceof Error)throw c;throw TypeError('Uncaught, unspecified "error" event.');}f=this._events[a];
if(void 0===f)return!1;if(b(f))switch(arguments.length){case 1:f.call(this);break;case 2:f.call(this,arguments[1]);break;case 3:f.call(this,arguments[1],arguments[2]);break;default:c=arguments.length;g=Array(c-1);for(h=1;h<c;h++)g[h-1]=arguments[h];f.apply(this,g)}else if(e(f)){c=arguments.length;g=Array(c-1);for(h=1;h<c;h++)g[h-1]=arguments[h];f=f.slice();c=f.length;for(h=0;h<c;h++)f[h].apply(this,g)}return!0};a.prototype.addListener=function(d,c){var f;if(!b(c))throw TypeError("listener must be a function");
this._events||(this._events={});this._events.newListener&&this.emit("newListener",d,b(c.listener)?c.listener:c);this._events[d]?e(this._events[d])?this._events[d].push(c):this._events[d]=[this._events[d],c]:this._events[d]=c;e(this._events[d])&&!this._events[d].warned&&(f=void 0!==this._maxListeners?this._maxListeners:a.defaultMaxListeners)&&0<f&&this._events[d].length>f&&(this._events[d].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",
this._events[d].length),"function"===typeof console.trace&&console.trace());return this};a.prototype.on=a.prototype.addListener;a.prototype.once=function(a,c){function e(){this.removeListener(a,e);g||(g=!0,c.apply(this,arguments))}if(!b(c))throw TypeError("listener must be a function");var g=!1;e.listener=c;this.on(a,e);return this};a.prototype.removeListener=function(a,c){var f,g,h;if(!b(c))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;f=this._events[a];
h=f.length;g=-1;if(f===c||b(f.listener)&&f.listener===c)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,c);else if(e(f)){for(;0<h--;)if(f[h]===c||f[h].listener&&f[h].listener===c){g=h;break}if(0>g)return this;1===f.length?(f.length=0,delete this._events[a]):f.splice(g,1);this._events.removeListener&&this.emit("removeListener",a,c)}return this};a.prototype.removeAllListeners=function(a){var c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?
this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(c in this._events)"removeListener"!==c&&this.removeAllListeners(c);this.removeAllListeners("removeListener");this._events={};return this}c=this._events[a];if(b(c))this.removeListener(a,c);else for(;c.length;)this.removeListener(a,c[c.length-1]);delete this._events[a];return this};a.prototype.listeners=function(a){return this._events&&this._events[a]?b(this._events[a])?[this._events[a]]:this._events[a].slice():
[]};a.listenerCount=function(a,c){return a._events&&a._events[c]?b(a._events[c])?1:a._events[c].length:0}},function(h,l,g){h.exports=function(a,b,e,d,c,f,g,h){if(!a){if(void 0===b)a=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[e,d,c,f,g,h],m=0;a=Error("Invariant Violation: "+b.replace(/%s/g,function(){return l[m++]}))}a.framesToPop=1;throw a;}}},function(h,l,g){(function(a){h.exports=function(b,e,
d,c,f,g,h){b=b||{};if("production"!==a.env.NODE_ENV&&h)throw Error("Too many arguments passed to copyProperties");e=[e,d,c,f,g];for(d=0;e[d];){c=e[d++];for(var l in c)b[l]=c[l];c.hasOwnProperty&&c.hasOwnProperty("toString")&&"undefined"!=typeof c.toString&&b.toString!==c.toString&&(b.toString=c.toString)}return b}}).call(l,g(33))},function(h,l,g){(function(a){var b=g(28);h.exports=function(e){var d={},c;"production"!==a.env.NODE_ENV?b(e instanceof Object&&!Array.isArray(e),"keyMirror(...): Argument must be an object."):
b(e instanceof Object&&!Array.isArray(e));for(c in e)e.hasOwnProperty(c)&&(d[c]=c);return d}}).call(l,g(33))},function(h,l,g){var a=g(29);h.exports=function(b,e){var d={};a(d,b);a(d,e);return d}},function(h,l,g){(function(a){h.exports=function(b,e,d,c,f,g,h,l){if("production"!==a.env.NODE_ENV&&void 0===e)throw Error("invariant requires an error message argument");if(!b){if(void 0===e)b=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");
else{var m=[d,c,f,g,h,l],v=0;b=Error("Invariant Violation: "+e.replace(/%s/g,function(){return m[v++]}))}b.framesToPop=1;throw b;}}}).call(l,g(33))},function(h,l,g){l=g(34);var a=l.checkMergeObjectArg,b=l.checkMergeIntoObjectArg;h.exports=function(e,d){b(e);if(null!=d){a(d);for(var c in d)d.hasOwnProperty(c)&&(e[c]=d[c])}}},function(h,l,g){h.exports=function(){throw Error("define cannot be used indirect");}},function(h,l,g){(function(a){h.exports=a}).call(l,{})},function(h,l,g){h.exports=function(a){a.webpackPolyfill||
(a.deprecate=function(){},a.paths=[],a.children=[],a.webpackPolyfill=1);return a}},function(h,l,g){function a(){}h=h.exports={};h.nextTick=function(){if("undefined"!==typeof window&&window.setImmediate)return function(a){return window.setImmediate(a)};if("undefined"!==typeof window&&window.postMessage&&window.addEventListener){var a=[];window.addEventListener("message",function(e){var d=e.source;d!==window&&null!==d||"process-tick"!==e.data||(e.stopPropagation(),0<a.length&&a.shift()())},!0);return function(e){a.push(e);
window.postMessage("process-tick","*")}}return function(a){setTimeout(a,0)}}();h.title="browser";h.browser=!0;h.env={};h.argv=[];h.on=a;h.addListener=a;h.once=a;h.off=a;h.removeListener=a;h.removeAllListeners=a;h.emit=a;h.binding=function(a){throw Error("process.binding is not supported");};h.cwd=function(){return"/"};h.chdir=function(a){throw Error("process.chdir is not supported");}},function(h,l,g){(function(a){var b=g(28),e=g(26),d=function(a){return"object"!==typeof a||null===a},c={MAX_MERGE_DEPTH:36,
isTerminal:d,normalizeMergeArg:function(a){return void 0===a||null===a?{}:a},checkMergeArrayArgs:function(c,d){"production"!==a.env.NODE_ENV?b(Array.isArray(c)&&Array.isArray(d),"Tried to merge arrays, instead got %s and %s.",c,d):b(Array.isArray(c)&&Array.isArray(d))},checkMergeObjectArgs:function(a,b){c.checkMergeObjectArg(a);c.checkMergeObjectArg(b)},checkMergeObjectArg:function(c){"production"!==a.env.NODE_ENV?b(!d(c)&&!Array.isArray(c),"Tried to merge an object, instead got %s.",c):b(!d(c)&&
!Array.isArray(c))},checkMergeIntoObjectArg:function(c){"production"!==a.env.NODE_ENV?b((!d(c)||"function"===typeof c)&&!Array.isArray(c),"Tried to merge into an object, instead got %s.",c):b((!d(c)||"function"===typeof c)&&!Array.isArray(c))},checkMergeLevel:function(c){"production"!==a.env.NODE_ENV?b(36>c,"Maximum deep merge depth exceeded. You may be attempting to merge circular structures in an unsupported way."):b(36>c)},checkArrayStrategy:function(d){"production"!==a.env.NODE_ENV?b(void 0===
d||d in c.ArrayStrategies,"You must provide an array strategy to deep merge functions to instruct the deep merge how to resolve merging two arrays."):b(void 0===d||d in c.ArrayStrategies)},ArrayStrategies:e({Clobber:!0,IndexByIndex:!0})};h.exports=c}).call(l,g(33))}]);
